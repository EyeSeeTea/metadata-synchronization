import { SynchronizationBuilder } from "../../../../synchronization/entities/SynchronizationBuilder";

export function givenABuilderWithUserGroupsAndDashboards(options: {
    includeObjectsAndReferences: boolean;
    includeOnlyReferences: boolean;
}): SynchronizationBuilder {
    const { includeObjectsAndReferences, includeOnlyReferences } = options;
    return {
        dataParams: {
            dryRun: false,
            strategy: "NEW_AND_UPDATES",
            allEvents: true,
            enableAggregation: false,
            allAttributeCategoryOptions: true,
        },
        syncParams: {
            mergeMode: "REPLACE",
            atomicMode: "ALL",
            importMode: "COMMIT",
            enableMapping: false,
            importStrategy: "CREATE_AND_UPDATE",
            metadataModelsSyncAll: [],
            useDefaultIncludeExclude: false,
            includeOnlyUsersReferences: includeOnlyReferences,
            metadataIncludeExcludeRules: {
                dashboard: {
                    excludeRules: [],
                    includeRules: [],
                    includeOnlyReferencesRules: [],
                    includeReferencesAndObjectsRules: [],
                },
                userGroup: {
                    excludeRules: ["users.avatar"],
                    includeRules: ["attributes", "users", "users.userRoles"],
                    includeOnlyReferencesRules: [],
                    includeReferencesAndObjectsRules: ["attributes", "users", "users.userRoles"],
                },
            },
            removeDefaultCategoryObjects: false,
            includeOnlyOrgUnitsReferences: includeOnlyReferences,
            removeUserNonEssentialObjects: false,
            includeUsersObjectsAndReferences: includeObjectsAndReferences,
            includeOrgUnitsObjectsAndReferences: includeObjectsAndReferences,
            includeOnlySharingSettingsReferences: includeOnlyReferences,
            includeSharingSettingsObjectsAndReferences: includeObjectsAndReferences,
        },
        excludedIds: [],
        filterRules: [],
        metadataIds: ["cW5vzBo63yj", "RXHVLrvnkG1"],
        metadataTypes: ["userGroups", "dashboards"],
        originInstance: "LjEZxEPP6v3",
        targetInstances: ["LOCAL"],
        syncRule: "sqjiA1MrHgb",
    };
}

const dashboards = {
    dashboards: [
        {
            name: "Test Dashboard",
            created: "2022-07-20T14:43:37.859",
            lastUpdated: "2025-07-01T11:48:02.977",
            translations: [],
            externalAccess: false,
            publicAccess: "--------",
            createdBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            userGroupAccesses: [
                {
                    access: "r-------",
                    displayName: "Test Dashboard group",
                    userGroupUid: "cW5vzBo63yj",
                    id: "cW5vzBo63yj",
                },
            ],
            userAccesses: [],
            access: {
                manage: true,
                externalize: true,
                write: true,
                read: true,
                update: true,
                delete: true,
            },
            favorites: [],
            lastUpdatedBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            sharing: {
                owner: "AAbBabBbTAA",
                external: false,
                users: {},
                userGroups: {
                    cW5vzBo63yj: {
                        displayName: "Test Dashboard group",
                        access: "r-------",
                        id: "cW5vzBo63yj",
                    },
                },
                public: "--------",
            },
            restrictFilters: false,
            allowedFilters: [],
            itemCount: 1,
            displayFormName: "Test Dashboard",
            displayName: "Test Dashboard",
            favorite: false,
            user: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            id: "RXHVLrvnkG1",
            attributeValues: [],
            dashboardItems: [
                {
                    created: "2024-11-07T03:44:48.025",
                    lastUpdated: "2024-11-07T03:44:48.062",
                    translations: [],
                    externalAccess: false,
                    userGroupAccesses: [],
                    userAccesses: [],
                    access: {
                        manage: true,
                        externalize: true,
                        write: true,
                        read: true,
                        update: true,
                        delete: true,
                    },
                    favorites: [],
                    sharing: {
                        external: false,
                        users: {},
                        userGroups: {},
                    },
                    visualization: {
                        id: "xzans13Zns5",
                    },
                    users: [],
                    x: 0,
                    y: 32,
                    height: 24,
                    width: 28,
                    interpretationCount: 0,
                    interpretationLikeCount: 0,
                    type: "VISUALIZATION",
                    contentCount: 1,
                    favorite: false,
                    id: "CDbOpEMJzVI",
                    attributeValues: [],
                    reports: [],
                    resources: [],
                },
            ],
        },
    ],
};

const userGroups = {
    userGroups: [
        {
            code: "TEST_DASHBOARD",
            name: "Test Dashboard group",
            created: "2022-08-19T10:25:30.395",
            lastUpdated: "2025-07-25T15:41:42.940",
            translations: [],
            externalAccess: false,
            publicAccess: "rw------",
            createdBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            userGroupAccesses: [],
            userAccesses: [],
            access: {
                manage: true,
                externalize: true,
                write: true,
                read: true,
                update: true,
                delete: true,
            },
            favorites: [],
            lastUpdatedBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            sharing: {
                owner: "AAbBabBbTAA",
                external: false,
                users: {},
                userGroups: {},
                public: "rw------",
            },
            displayName: "EFH Dashboard",
            favorite: false,
            user: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            id: "cW5vzBo63yj",
            attributeValues: [],
            users: [
                {
                    id: "yX5y8nrbM55",
                    code: null,
                    name: "A test dashboard user",
                    displayName: "A test dashboard user",
                    username: "dashboard_test",
                },
                {
                    id: "AAbBabBbTAA",
                    code: "admin",
                    name: "admin admin",
                    displayName: "admin admin",
                    username: "admin",
                },
            ],
            managedGroups: [],
            managedByGroups: [],
        },
    ],
};

const users = {
    users: [
        {
            code: "admin",
            name: "admin admin",
            created: "2020-07-17T07:57:31.861",
            lastUpdated: "2025-01-02T09:29:02.878",
            translations: [],
            externalAccess: false,
            createdBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            userGroupAccesses: [],
            userAccesses: [],
            access: {
                manage: true,
                externalize: true,
                write: true,
                read: true,
                update: true,
                delete: true,
            },
            favorites: [],
            lastUpdatedBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            sharing: {
                external: false,
                users: {},
                userGroups: {},
            },
            username: "admin",
            externalAuth: false,
            passwordLastUpdated: "2024-10-21T05:45:59.177",
            cogsDimensionConstraints: [],
            catDimensionConstraints: [],
            lastLogin: "2024-12-30T02:00:26.050",
            selfRegistered: false,
            invitation: false,
            disabled: true,
            surname: "admin",
            firstName: "admin",
            email: "admin@example.com",
            lastCheckedInterpretations: "2022-10-26T15:12:55.903",
            organisationUnits: [
                {
                    id: "N6J183QZ5t8",
                },
            ],
            dataViewOrganisationUnits: [
                {
                    id: "ugQ7vNtTtdY",
                },
            ],
            teiSearchOrganisationUnits: [
                {
                    id: "AGZEUf9meZ6",
                },
            ],
            twoFactorEnabled: false,
            userCredentials: {
                id: "AAbBabBbTAA",
                username: "admin",
                externalAuth: false,
                twoFA: false,
                passwordLastUpdated: "2024-10-21T05:45:59.177",
                cogsDimensionConstraints: [],
                catDimensionConstraints: [],
                previousPasswords: [],
                lastLogin: "2024-12-30T02:00:26.050",
                restoreToken: "$test",
                idToken: "test",
                restoreExpiry: "2024-07-24T00:00:00.000",
                selfRegistered: false,
                invitation: false,
                disabled: true,
                access: {
                    manage: true,
                    externalize: true,
                    write: true,
                    read: true,
                    update: true,
                    delete: true,
                },
                sharing: {
                    external: false,
                    users: {},
                    userGroups: {},
                },
                userRoles: [],
            },
            displayName: "admin admin",
            favorite: false,
            user: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            id: "AAbBabBbTAA",
            attributeValues: [],
            userRoles: [],
            userGroups: [],
        },
        {
            name: "A test dashboard user",
            created: "2023-10-26T17:21:34.903",
            lastUpdated: "2025-05-21T14:42:40.258",
            translations: [],
            externalAccess: false,
            createdBy: {
                id: "yX5y8nrbM55",
                code: null,
                name: "A test dashboard user",
                displayName: "A test dashboard user",
                username: "dashboard_test",
            },
            userGroupAccesses: [],
            userAccesses: [],
            access: {
                manage: true,
                externalize: true,
                write: true,
                read: true,
                update: true,
                delete: true,
            },
            favorites: [],
            lastUpdatedBy: {
                id: "yX5y8nrbM55",
                code: null,
                name: "A test dashboard user",
                displayName: "A test dashboard user",
                username: "dashboard_test",
            },
            sharing: {
                external: false,
                users: {},
                userGroups: {},
            },
            username: "dashboard_test",
            externalAuth: false,
            passwordLastUpdated: "2023-12-30T01:36:37.129",
            cogsDimensionConstraints: [],
            catDimensionConstraints: [],
            lastLogin: "2025-05-21T14:42:40.257",
            selfRegistered: false,
            invitation: false,
            disabled: false,
            surname: "Test",
            firstName: "Test",
            email: "test@example.com",
            organisationUnits: [
                {
                    id: "qGewSdAuYF7",
                },
            ],
            dataViewOrganisationUnits: [
                {
                    id: "qGewSdAuYF7",
                },
            ],
            teiSearchOrganisationUnits: [
                {
                    id: "qGewSdAuYF7",
                },
            ],
            twoFactorEnabled: false,
            userCredentials: {
                id: "yX5y8nrbM55",
                username: "dashboard_test",
                externalAuth: false,
                twoFA: false,
                passwordLastUpdated: "2023-12-30T01:36:37.129",
                cogsDimensionConstraints: [],
                catDimensionConstraints: [],
                previousPasswords: [],
                lastLogin: "2025-05-21T14:42:40.257",
                selfRegistered: false,
                invitation: false,
                disabled: false,
                access: {
                    manage: true,
                    externalize: true,
                    write: true,
                    read: true,
                    update: true,
                    delete: true,
                },
                sharing: {
                    external: false,
                    users: {},
                    userGroups: {},
                },
                userRoles: [
                    {
                        id: "Q5iKJIvNFFk",
                    },
                    {
                        id: "ucZNfZtjtfV",
                    },
                    {
                        id: "syqlfpKHyOx",
                    },
                ],
            },
            displayName: "A test dashboard user",
            favorite: false,
            user: {
                id: "yX5y8nrbM55",
                code: null,
                name: "A test dashboard user",
                displayName: "A test dashboard user",
                username: "dashboard_test",
            },
            id: "yX5y8nrbM55",
            attributeValues: [],
            userRoles: [
                {
                    id: "Q5iKJIvNFFk",
                },
            ],
            userGroups: [
                {
                    id: "cW5vzBo63yj",
                },
            ],
        },
    ],
};

const userRoles = {
    userRoles: [
        {
            name: "Test Dashboard",
            created: "2022-08-22T11:54:51.193",
            lastUpdated: "2025-06-18T15:50:11.880",
            translations: [],
            externalAccess: false,
            publicAccess: "rw------",
            createdBy: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            userGroupAccesses: [],
            userAccesses: [],
            access: {
                manage: true,
                externalize: true,
                write: true,
                read: true,
                update: true,
                delete: true,
            },
            favorites: [],
            lastUpdatedBy: {
                id: "EONktGfcC2b",
                code: null,
                name: "Derek Blalock",
                displayName: "Derek Blalock",
                username: "dblalock",
            },
            sharing: {
                owner: "AAbBabBbTAA",
                external: false,
                users: {},
                userGroups: {},
                public: "rw------",
            },
            authorities: [
                "F_VIEW_EVENT_ANALYTICS",
                "M_dhis-web-event-reports",
                "M_dhis-web-data-visualizer",
                "M_dhis-web-dashboard",
                "M_dhis-web-cache-cleaner",
                "M_dhis-web-event-visualizer",
                "M_linelisting",
                "M_dhis-web-maps",
            ],
            restrictions: [],
            users: [
                {
                    id: "yX5y8nrbM55",
                },
                {
                    id: "AAbBabBbTAA",
                },
            ],
            displayName: "Test Dashboard",
            favorite: false,
            user: {
                id: "AAbBabBbTAA",
                code: "admin",
                name: "admin admin",
                displayName: "admin admin",
                username: "admin",
            },
            id: "Q5iKJIvNFFk",
            attributeValues: [],
        },
    ],
};

export const givenUserGroupsAndDashboardMetadataResponses = () => ({
    dashboards,
    userGroups,
    users,
    userRoles,
});
